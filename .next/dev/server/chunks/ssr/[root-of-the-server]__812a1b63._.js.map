{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rokat/OneDrive/Proyectos/ManayAcademy/src/lib/actions.ts"],"sourcesContent":["\r\n'use server'\r\n\r\nimport { signIn } from '@/auth'\r\nimport { AuthError } from 'next-auth'\r\n\r\nexport async function authenticate(\r\n    prevState: string | undefined,\r\n    formData: FormData,\r\n) {\r\n    try {\r\n        const slug = formData.get('slug') as string;\r\n        const { prisma } = await import('@/lib/prisma');\r\n\r\n        let tenant;\r\n        if (slug) {\r\n            tenant = await prisma.tenant.findUnique({ where: { slug } });\r\n        } else {\r\n            // Single-tenant fallback: get the first active tenant\r\n            tenant = await prisma.tenant.findFirst();\r\n        }\r\n\r\n        if (!tenant) return 'System not initialized. Please run seeds.';\r\n\r\n        await signIn('credentials', {\r\n            ...Object.fromEntries(formData),\r\n            tenantId: tenant.id,\r\n            redirectTo: '/admin',\r\n        });\r\n\r\n    } catch (error) {\r\n        if (error instanceof AuthError) {\r\n            switch (error.type) {\r\n                case 'CredentialsSignin':\r\n                    return 'Invalid credentials.'\r\n                default:\r\n                    return 'Something went wrong.'\r\n            }\r\n        }\r\n        throw error\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAMsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rokat/OneDrive/Proyectos/ManayAcademy/src/app/login/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useActionState } from 'react'\r\nimport { authenticate } from '@/lib/actions'\r\nimport Link from \"next/link\";\r\n\r\nexport default function LoginPage() {\r\n    const [errorMessage, dispatch, isPending] = useActionState(authenticate, undefined)\r\n\r\n    return (\r\n        <div className=\"center-container\">\r\n            <div className=\"premium-card\">\r\n                <header style={{ marginBottom: '50px' }}>\r\n                    <p style={{ fontSize: '0.65rem', textTransform: 'uppercase', letterSpacing: '0.4em', color: 'var(--primary)', fontWeight: 'bold', marginBottom: '15px' }}>\r\n                        Espacio de Gestión\r\n                    </p>\r\n                    <h2 style={{ fontSize: '2.2rem', color: 'var(--text-main)', margin: '0' }}>\r\n                        Acceso\r\n                    </h2>\r\n                    <div style={{ width: '40px', height: '1px', background: 'var(--primary)', margin: '25px auto', opacity: '0.2' }}></div>\r\n                </header>\r\n\r\n                <form action={dispatch}>\r\n                    <div className=\"input-group\">\r\n                        <label htmlFor=\"email\" className=\"input-label\">Email</label>\r\n                        <input\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            type=\"email\"\r\n                            autoComplete=\"email\"\r\n                            placeholder=\"info@manayacademy.com\"\r\n                            required\r\n                            disabled={isPending}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"input-group\">\r\n                        <label htmlFor=\"password\" className=\"input-label\">Contraseña</label>\r\n                        <input\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            autoComplete=\"current-password\"\r\n                            placeholder=\"••••••••\"\r\n                            required\r\n                            disabled={isPending}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: '40px' }}>\r\n                        <button disabled={isPending} type=\"submit\" className=\"btn-primary\">\r\n                            {isPending ? 'VALIDANDO...' : 'ENTRAR'}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {errorMessage && (\r\n                        <div className=\"msg-container msg-error\">\r\n                            {errorMessage}\r\n                        </div>\r\n                    )}\r\n                </form>\r\n\r\n                <footer style={{ marginTop: '50px', paddingTop: '30px', borderTop: '1px solid #f1f5f9' }}>\r\n                    <Link href=\"/\" style={{ fontSize: '0.65rem', color: 'var(--text-muted)', textDecoration: 'none', textTransform: 'uppercase', letterSpacing: '0.2em', fontWeight: 'bold' }}>\r\n                        ← Regresar a la web\r\n                    </Link>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,cAAc,UAAU,UAAU,GAAG,IAAA,uNAAc,EAAC,kKAAY,EAAE;IAEzE,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAO,OAAO;wBAAE,cAAc;oBAAO;;sCAClC,8OAAC;4BAAE,OAAO;gCAAE,UAAU;gCAAW,eAAe;gCAAa,eAAe;gCAAS,OAAO;gCAAkB,YAAY;gCAAQ,cAAc;4BAAO;sCAAG;;;;;;sCAG1J,8OAAC;4BAAG,OAAO;gCAAE,UAAU;gCAAU,OAAO;gCAAoB,QAAQ;4BAAI;sCAAG;;;;;;sCAG3E,8OAAC;4BAAI,OAAO;gCAAE,OAAO;gCAAQ,QAAQ;gCAAO,YAAY;gCAAkB,QAAQ;gCAAa,SAAS;4BAAM;;;;;;;;;;;;8BAGlH,8OAAC;oBAAK,QAAQ;;sCACV,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAM,SAAQ;oCAAQ,WAAU;8CAAc;;;;;;8CAC/C,8OAAC;oCACG,IAAG;oCACH,MAAK;oCACL,MAAK;oCACL,cAAa;oCACb,aAAY;oCACZ,QAAQ;oCACR,UAAU;;;;;;;;;;;;sCAIlB,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAM,SAAQ;oCAAW,WAAU;8CAAc;;;;;;8CAClD,8OAAC;oCACG,IAAG;oCACH,MAAK;oCACL,MAAK;oCACL,cAAa;oCACb,aAAY;oCACZ,QAAQ;oCACR,UAAU;;;;;;;;;;;;sCAIlB,8OAAC;4BAAI,OAAO;gCAAE,WAAW;4BAAO;sCAC5B,cAAA,8OAAC;gCAAO,UAAU;gCAAW,MAAK;gCAAS,WAAU;0CAChD,YAAY,iBAAiB;;;;;;;;;;;wBAIrC,8BACG,8OAAC;4BAAI,WAAU;sCACV;;;;;;;;;;;;8BAKb,8OAAC;oBAAO,OAAO;wBAAE,WAAW;wBAAQ,YAAY;wBAAQ,WAAW;oBAAoB;8BACnF,cAAA,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,OAAO;4BAAE,UAAU;4BAAW,OAAO;4BAAqB,gBAAgB;4BAAQ,eAAe;4BAAa,eAAe;4BAAS,YAAY;wBAAO;kCAAG;;;;;;;;;;;;;;;;;;;;;;AAO/L"}}]
}