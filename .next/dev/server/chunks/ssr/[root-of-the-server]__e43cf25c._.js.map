{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rokat/OneDrive/Proyectos/ManayAcademy/src/actions/contacts.ts"],"sourcesContent":["'use server'\r\n\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { redirect } from \"next/navigation\"\r\n\r\nexport async function createContact(tenantId: string, formData: FormData) {\r\n    const email = formData.get('email') as string\r\n    const firstName = formData.get('firstName') as string\r\n    const lastName = formData.get('lastName') as string\r\n    const tagsInput = formData.get('tags') as string\r\n\r\n    if (!email) {\r\n        throw new Error('Email is required')\r\n    }\r\n\r\n    // Handle Tags (comma separated)\r\n    const tagNames = tagsInput.split(',').map(t => t.trim()).filter(Boolean)\r\n\r\n    try {\r\n        await prisma.contact.create({\r\n            data: {\r\n                tenantId,\r\n                email,\r\n                firstName,\r\n                lastName,\r\n                source: 'Manual Entry',\r\n                tags: {\r\n                    connectOrCreate: tagNames.map(name => ({\r\n                        where: { tenantId_name: { name, tenantId } },\r\n                        create: { name, tenantId }\r\n                    }))\r\n                }\r\n            }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to create contact:', error)\r\n        // Handle duplicate email error\r\n        return { error: 'Failed to create contact. Email might already exist.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    redirect('/admin/contacts')\r\n}\r\n\r\nexport async function updateContact(tenantId: string, id: string, formData: FormData) {\r\n    if (!id) return { error: 'ID required' }\r\n\r\n    const email = formData.get('email') as string\r\n    const firstName = formData.get('firstName') as string\r\n    const lastName = formData.get('lastName') as string\r\n    const tagsInput = formData.get('tags') as string\r\n    const status = formData.get('status') as string\r\n\r\n    if (!email) {\r\n        return { error: 'Email is required' }\r\n    }\r\n\r\n    const tagNames = tagsInput.split(',').map(t => t.trim()).filter(Boolean)\r\n\r\n    try {\r\n        // Verify ownership\r\n        const existing = await prisma.contact.findUnique({\r\n            where: { id }\r\n        })\r\n        if (!existing || existing.tenantId !== tenantId) {\r\n            return { error: 'Contact not found or access denied relative to tenant.' }\r\n        }\r\n\r\n        // First disconnect all tags, then connect/create the new ones\r\n        await prisma.contact.update({\r\n            where: { id },\r\n            data: {\r\n                email,\r\n                firstName,\r\n                lastName,\r\n                status,\r\n                tags: {\r\n                    set: [], // Disconnect all existing tags\r\n                    connectOrCreate: tagNames.map(name => ({\r\n                        where: { tenantId_name: { name, tenantId } },\r\n                        create: { name, tenantId }\r\n                    }))\r\n                }\r\n            }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to update contact:', error)\r\n        return { error: 'Failed to update contact.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    revalidatePath(`/admin/contacts/${id}`)\r\n    redirect('/admin/contacts')\r\n}\r\n\r\nexport async function deleteContact(tenantId: string, id: string) {\r\n    if (!id) return\r\n\r\n    try {\r\n        const existing = await prisma.contact.findUnique({\r\n            where: { id }\r\n        })\r\n        if (!existing || existing.tenantId !== tenantId) {\r\n            return { error: 'Access denied.' }\r\n        }\r\n\r\n        await prisma.contact.delete({\r\n            where: { id }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to delete contact:', error)\r\n        return { error: 'Failed to delete contact.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    redirect('/admin/contacts')\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAMsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rokat/OneDrive/Proyectos/ManayAcademy/src/actions/contacts.ts"],"sourcesContent":["'use server'\r\n\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { redirect } from \"next/navigation\"\r\n\r\nexport async function createContact(tenantId: string, formData: FormData) {\r\n    const email = formData.get('email') as string\r\n    const firstName = formData.get('firstName') as string\r\n    const lastName = formData.get('lastName') as string\r\n    const tagsInput = formData.get('tags') as string\r\n\r\n    if (!email) {\r\n        throw new Error('Email is required')\r\n    }\r\n\r\n    // Handle Tags (comma separated)\r\n    const tagNames = tagsInput.split(',').map(t => t.trim()).filter(Boolean)\r\n\r\n    try {\r\n        await prisma.contact.create({\r\n            data: {\r\n                tenantId,\r\n                email,\r\n                firstName,\r\n                lastName,\r\n                source: 'Manual Entry',\r\n                tags: {\r\n                    connectOrCreate: tagNames.map(name => ({\r\n                        where: { tenantId_name: { name, tenantId } },\r\n                        create: { name, tenantId }\r\n                    }))\r\n                }\r\n            }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to create contact:', error)\r\n        // Handle duplicate email error\r\n        return { error: 'Failed to create contact. Email might already exist.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    redirect('/admin/contacts')\r\n}\r\n\r\nexport async function updateContact(tenantId: string, id: string, formData: FormData) {\r\n    if (!id) return { error: 'ID required' }\r\n\r\n    const email = formData.get('email') as string\r\n    const firstName = formData.get('firstName') as string\r\n    const lastName = formData.get('lastName') as string\r\n    const tagsInput = formData.get('tags') as string\r\n    const status = formData.get('status') as string\r\n\r\n    if (!email) {\r\n        return { error: 'Email is required' }\r\n    }\r\n\r\n    const tagNames = tagsInput.split(',').map(t => t.trim()).filter(Boolean)\r\n\r\n    try {\r\n        // Verify ownership\r\n        const existing = await prisma.contact.findUnique({\r\n            where: { id }\r\n        })\r\n        if (!existing || existing.tenantId !== tenantId) {\r\n            return { error: 'Contact not found or access denied relative to tenant.' }\r\n        }\r\n\r\n        // First disconnect all tags, then connect/create the new ones\r\n        await prisma.contact.update({\r\n            where: { id },\r\n            data: {\r\n                email,\r\n                firstName,\r\n                lastName,\r\n                status,\r\n                tags: {\r\n                    set: [], // Disconnect all existing tags\r\n                    connectOrCreate: tagNames.map(name => ({\r\n                        where: { tenantId_name: { name, tenantId } },\r\n                        create: { name, tenantId }\r\n                    }))\r\n                }\r\n            }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to update contact:', error)\r\n        return { error: 'Failed to update contact.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    revalidatePath(`/admin/contacts/${id}`)\r\n    redirect('/admin/contacts')\r\n}\r\n\r\nexport async function deleteContact(tenantId: string, id: string) {\r\n    if (!id) return\r\n\r\n    try {\r\n        const existing = await prisma.contact.findUnique({\r\n            where: { id }\r\n        })\r\n        if (!existing || existing.tenantId !== tenantId) {\r\n            return { error: 'Access denied.' }\r\n        }\r\n\r\n        await prisma.contact.delete({\r\n            where: { id }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to delete contact:', error)\r\n        return { error: 'Failed to delete contact.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    redirect('/admin/contacts')\r\n}\r\n"],"names":[],"mappings":";;;;;;;MA6CsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rokat/OneDrive/Proyectos/ManayAcademy/src/actions/contacts.ts"],"sourcesContent":["'use server'\r\n\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { redirect } from \"next/navigation\"\r\n\r\nexport async function createContact(tenantId: string, formData: FormData) {\r\n    const email = formData.get('email') as string\r\n    const firstName = formData.get('firstName') as string\r\n    const lastName = formData.get('lastName') as string\r\n    const tagsInput = formData.get('tags') as string\r\n\r\n    if (!email) {\r\n        throw new Error('Email is required')\r\n    }\r\n\r\n    // Handle Tags (comma separated)\r\n    const tagNames = tagsInput.split(',').map(t => t.trim()).filter(Boolean)\r\n\r\n    try {\r\n        await prisma.contact.create({\r\n            data: {\r\n                tenantId,\r\n                email,\r\n                firstName,\r\n                lastName,\r\n                source: 'Manual Entry',\r\n                tags: {\r\n                    connectOrCreate: tagNames.map(name => ({\r\n                        where: { tenantId_name: { name, tenantId } },\r\n                        create: { name, tenantId }\r\n                    }))\r\n                }\r\n            }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to create contact:', error)\r\n        // Handle duplicate email error\r\n        return { error: 'Failed to create contact. Email might already exist.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    redirect('/admin/contacts')\r\n}\r\n\r\nexport async function updateContact(tenantId: string, id: string, formData: FormData) {\r\n    if (!id) return { error: 'ID required' }\r\n\r\n    const email = formData.get('email') as string\r\n    const firstName = formData.get('firstName') as string\r\n    const lastName = formData.get('lastName') as string\r\n    const tagsInput = formData.get('tags') as string\r\n    const status = formData.get('status') as string\r\n\r\n    if (!email) {\r\n        return { error: 'Email is required' }\r\n    }\r\n\r\n    const tagNames = tagsInput.split(',').map(t => t.trim()).filter(Boolean)\r\n\r\n    try {\r\n        // Verify ownership\r\n        const existing = await prisma.contact.findUnique({\r\n            where: { id }\r\n        })\r\n        if (!existing || existing.tenantId !== tenantId) {\r\n            return { error: 'Contact not found or access denied relative to tenant.' }\r\n        }\r\n\r\n        // First disconnect all tags, then connect/create the new ones\r\n        await prisma.contact.update({\r\n            where: { id },\r\n            data: {\r\n                email,\r\n                firstName,\r\n                lastName,\r\n                status,\r\n                tags: {\r\n                    set: [], // Disconnect all existing tags\r\n                    connectOrCreate: tagNames.map(name => ({\r\n                        where: { tenantId_name: { name, tenantId } },\r\n                        create: { name, tenantId }\r\n                    }))\r\n                }\r\n            }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to update contact:', error)\r\n        return { error: 'Failed to update contact.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    revalidatePath(`/admin/contacts/${id}`)\r\n    redirect('/admin/contacts')\r\n}\r\n\r\nexport async function deleteContact(tenantId: string, id: string) {\r\n    if (!id) return\r\n\r\n    try {\r\n        const existing = await prisma.contact.findUnique({\r\n            where: { id }\r\n        })\r\n        if (!existing || existing.tenantId !== tenantId) {\r\n            return { error: 'Access denied.' }\r\n        }\r\n\r\n        await prisma.contact.delete({\r\n            where: { id }\r\n        })\r\n    } catch (error) {\r\n        console.error('Failed to delete contact:', error)\r\n        return { error: 'Failed to delete contact.' }\r\n    }\r\n\r\n    revalidatePath('/admin/contacts')\r\n    redirect('/admin/contacts')\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAgGsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rokat/OneDrive/Proyectos/ManayAcademy/src/app/%28public%29/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { registerPublicLead } from \"@/actions/contacts\";\r\n\r\nexport default function Home() {\r\n    const [status, setStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle');\r\n\r\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        setStatus('loading');\r\n\r\n        const formData = new FormData(e.currentTarget);\r\n        const result = await registerPublicLead(formData);\r\n\r\n        if (result?.success) {\r\n            setStatus('success');\r\n        } else {\r\n            setStatus('error');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen py-12 px-4 md:py-20 flex flex-col items-center\">\r\n            {/* Minimalist Card */}\r\n            <div className=\"ana-card text-center space-y-8 w-full\">\r\n                {/* Header Section */}\r\n                <div className=\"space-y-4\">\r\n                    <p className=\"uppercase tracking-[0.3em] text-[#64748b] text-sm font-semibold\">\r\n                        Web Oficial\r\n                    </p>\r\n                    <h1 className=\"text-3xl md:text-4xl font-semibold text-[#2d3e50]\">\r\n                        Ana Katherine Zepeda Pallacán\r\n                    </h1>\r\n                    <p className=\"italic text-[#64748b] text-base md:text-lg\">\r\n                        Psicóloga – Maestra de Yoga – Meditación – Crioterapia\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"h-[1px] bg-[#f1f5f9] w-full\" />\r\n\r\n                {/* Mission Section */}\r\n                <div className=\"space-y-6 text-[#1e293b] text-lg leading-relaxed\">\r\n                    <p>\r\n                        Navegando todo sobre salud mental, física y espiritual.\r\n                    </p>\r\n                    <p>\r\n                        <span className=\"font-bold\">Desde 2009 a la fecha</span>, convencida de que menos es más.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Registration Box */}\r\n                <div className=\"dotted-box space-y-6\">\r\n                    <h2 className=\"uppercase tracking-[0.1em] text-[#1e293b] font-bold text-lg\">\r\n                        Regístrate hoy y recibe:\r\n                    </h2>\r\n                    <ul className=\"text-left space-y-4 text-sm md:text-base text-[#475569] max-w-lg mx-auto\">\r\n                        <li className=\"flex items-start\">\r\n                            <span className=\"text-[#2d3e50] mr-3\">•</span>\r\n                            <span>Audio para aprender a meditar.</span>\r\n                        </li>\r\n                        <li className=\"flex items-start\">\r\n                            <span className=\"text-[#2d3e50] mr-3\">•</span>\r\n                            <span>Datos prácticos de salud.</span>\r\n                        </li>\r\n                        <li className=\"flex items-start\">\r\n                            <span className=\"text-[#2d3e50] mr-3\">•</span>\r\n                            <span>Reflexiones para que no sientas que eres el único loco o loca que busca algo mejor de lo que hemos creado.</span>\r\n                        </li>\r\n                        <li className=\"flex items-start\">\r\n                            <span className=\"text-[#2d3e50] mr-3\">•</span>\r\n                            <span>Acceso anticipado a lanzamientos, regalos y promociones.</span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                {/* Form Section */}\r\n                <div className=\"pt-6 space-y-8 max-w-md mx-auto\">\r\n                    {status === 'success' ? (\r\n                        <div className=\"p-8 bg-green-50 text-green-700 rounded-sm border border-green-100 animate-in fade-in zoom-in duration-300\">\r\n                            <p className=\"font-semibold text-lg\">¡Registro Exitoso!</p>\r\n                            <p className=\"text-sm mt-2\">Gracias por sumarte. Pronto recibirás noticias en tu correo.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <p className=\"font-semibold text-[#2d3e50]\">Te leo</p>\r\n                            <form className=\"space-y-4\" onSubmit={handleSubmit}>\r\n                                <input\r\n                                    name=\"firstName\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Tu nombre\"\r\n                                    className=\"input-ana\"\r\n                                    required\r\n                                    disabled={status === 'loading'}\r\n                                />\r\n                                <input\r\n                                    name=\"email\"\r\n                                    type=\"email\"\r\n                                    placeholder=\"Tu correo electrónico\"\r\n                                    className=\"input-ana\"\r\n                                    required\r\n                                    disabled={status === 'loading'}\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn-ana w-full disabled:opacity-50\"\r\n                                    disabled={status === 'loading'}\r\n                                >\r\n                                    {status === 'loading' ? 'Registrando...' : 'Registrarme'}\r\n                                </button>\r\n                                {status === 'error' && (\r\n                                    <p className=\"text-red-500 text-xs text-center\">Ocurrió un error. Inténtalo de nuevo.</p>\r\n                                )}\r\n                            </form>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Simple Login Link */}\r\n                <div className=\"pt-8 border-t border-[#f1f5f9]\">\r\n                    <Link href=\"/login\" className=\"text-xs text-[#94a3b8] hover:text-[#2d3e50] transition-colors uppercase tracking-widest font-semibold\">\r\n                        Acceso Alumnos\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <footer className=\"mt-12 text-center text-xs text-[#94a3b8] font-medium tracking-tight\">\r\n                © 2026 Manay Academy. Todos los derechos reservados.\r\n            </footer>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAA2C;IAE/E,eAAe,aAAa,CAAmC;QAC3D,EAAE,cAAc;QAChB,UAAU;QAEV,MAAM,WAAW,IAAI,SAAS,EAAE,aAAa;QAC7C,MAAM,SAAS,MAAM,IAAA,gJAAkB,EAAC;QAExC,IAAI,QAAQ,SAAS;YACjB,UAAU;QACd,OAAO;YACH,UAAU;QACd;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;0CAAkE;;;;;;0CAG/E,8OAAC;gCAAG,WAAU;0CAAoD;;;;;;0CAGlE,8OAAC;gCAAE,WAAU;0CAA6C;;;;;;;;;;;;kCAK9D,8OAAC;wBAAI,WAAU;;;;;;kCAGf,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAE;;;;;;0CAGH,8OAAC;;kDACG,8OAAC;wCAAK,WAAU;kDAAY;;;;;;oCAA4B;;;;;;;;;;;;;kCAKhE,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAA8D;;;;;;0CAG5E,8OAAC;gCAAG,WAAU;;kDACV,8OAAC;wCAAG,WAAU;;0DACV,8OAAC;gDAAK,WAAU;0DAAsB;;;;;;0DACtC,8OAAC;0DAAK;;;;;;;;;;;;kDAEV,8OAAC;wCAAG,WAAU;;0DACV,8OAAC;gDAAK,WAAU;0DAAsB;;;;;;0DACtC,8OAAC;0DAAK;;;;;;;;;;;;kDAEV,8OAAC;wCAAG,WAAU;;0DACV,8OAAC;gDAAK,WAAU;0DAAsB;;;;;;0DACtC,8OAAC;0DAAK;;;;;;;;;;;;kDAEV,8OAAC;wCAAG,WAAU;;0DACV,8OAAC;gDAAK,WAAU;0DAAsB;;;;;;0DACtC,8OAAC;0DAAK;;;;;;;;;;;;;;;;;;;;;;;;kCAMlB,8OAAC;wBAAI,WAAU;kCACV,WAAW,0BACR,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAE,WAAU;8CAAwB;;;;;;8CACrC,8OAAC;oCAAE,WAAU;8CAAe;;;;;;;;;;;iDAGhC;;8CACI,8OAAC;oCAAE,WAAU;8CAA+B;;;;;;8CAC5C,8OAAC;oCAAK,WAAU;oCAAY,UAAU;;sDAClC,8OAAC;4CACG,MAAK;4CACL,MAAK;4CACL,aAAY;4CACZ,WAAU;4CACV,QAAQ;4CACR,UAAU,WAAW;;;;;;sDAEzB,8OAAC;4CACG,MAAK;4CACL,MAAK;4CACL,aAAY;4CACZ,WAAU;4CACV,QAAQ;4CACR,UAAU,WAAW;;;;;;sDAEzB,8OAAC;4CACG,MAAK;4CACL,WAAU;4CACV,UAAU,WAAW;sDAEpB,WAAW,YAAY,mBAAmB;;;;;;wCAE9C,WAAW,yBACR,8OAAC;4CAAE,WAAU;sDAAmC;;;;;;;;;;;;;;;;;;;kCAQpE,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,uKAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAwG;;;;;;;;;;;;;;;;;0BAM9I,8OAAC;gBAAO,WAAU;0BAAsE;;;;;;;;;;;;AAKpG"}}]
}