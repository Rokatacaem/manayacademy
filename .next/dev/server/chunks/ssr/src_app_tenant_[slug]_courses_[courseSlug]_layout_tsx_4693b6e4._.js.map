{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rokat/OneDrive/Proyectos/ManayAcademy/src/app/tenant/%5Bslug%5D/courses/%5BcourseSlug%5D/layout.tsx"],"sourcesContent":["import { prisma } from '@/lib/prisma';\r\nimport Link from 'next/link';\r\nimport { notFound } from 'next/navigation';\r\n\r\nexport default async function CourseLayout({\r\n    children,\r\n    params\r\n}: {\r\n    children: React.ReactNode;\r\n    params: Promise<{ slug: string, courseSlug: string }>;\r\n}) {\r\n    const resolvedParams = await params;\r\n    const { slug, courseSlug } = resolvedParams;\r\n\r\n    // 1. Get Tenant\r\n    const tenant = await prisma.tenant.findUnique({ where: { slug } });\r\n    if (!tenant) notFound();\r\n\r\n    // 2. Get Course scoped to Tenant\r\n    const course = await prisma.course.findUnique({\r\n        where: {\r\n            tenantId_slug: {\r\n                tenantId: tenant.id,\r\n                slug: courseSlug\r\n            }\r\n        },\r\n        include: {\r\n            modules: {\r\n                orderBy: { order: 'asc' },\r\n                include: {\r\n                    lessons: {\r\n                        orderBy: { order: 'asc' }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    if (!course) {\r\n        notFound();\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex flex-col pt-16 md:pt-0 md:flex-row\">\r\n            {/* Sidebar / Curriculum */}\r\n            <aside className=\"w-full md:w-80 bg-gray-50 dark:bg-zinc-900 border-r border-gray-200 dark:border-zinc-800 flex-shrink-0 md:h-screen md:sticky md:top-0 overflow-y-auto\">\r\n                <div className=\"p-4 border-b border-gray-200 dark:border-zinc-800\">\r\n                    <Link href=\"/courses\" className=\"text-xs text-gray-500 hover:text-gray-900 dark:hover:text-gray-300 mb-2 block\">\r\n                        &larr; Volver al catálogo\r\n                    </Link>\r\n                    <h2 className=\"font-bold text-lg leading-tight\">{course.title}</h2>\r\n                </div>\r\n\r\n                <div className=\"p-4 space-y-6\">\r\n                    {course.modules.map((module, modIndex) => (\r\n                        <div key={module.id}>\r\n                            <h3 className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\">\r\n                                Módulo {modIndex + 1}: {module.title}\r\n                            </h3>\r\n                            <ul className=\"space-y-1\">\r\n                                {module.lessons.map((lesson, lessonIndex) => (\r\n                                    <li key={lesson.id}>\r\n                                        <Link\r\n                                            href={`/courses/${course.slug}/${lesson.slug}`}\r\n                                            className=\"block px-3 py-2 rounded-md text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors\"\r\n                                        >\r\n                                            <div className=\"flex items-start gap-2\">\r\n                                                <span className=\"mt-0.5 text-gray-400 dark:text-gray-500 text-xs text-nowrap\">\r\n                                                    {modIndex + 1}.{lessonIndex + 1}\r\n                                                </span>\r\n                                                <span>{lesson.title}</span>\r\n                                            </div>\r\n                                        </Link>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n                    ))}\r\n                    {course.modules.length === 0 && (\r\n                        <p className=\"text-sm text-gray-500 italic\">Próximamente...</p>\r\n                    )}\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 min-w-0\">\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;;;;;AAEe,eAAe,aAAa,EACvC,QAAQ,EACR,MAAM,EAIT;IACG,MAAM,iBAAiB,MAAM;IAC7B,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG;IAE7B,gBAAgB;IAChB,MAAM,SAAS,MAAM,8HAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QAAE,OAAO;YAAE;QAAK;IAAE;IAChE,IAAI,CAAC,QAAQ,IAAA,iMAAQ;IAErB,iCAAiC;IACjC,MAAM,SAAS,MAAM,8HAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QAC1C,OAAO;YACH,eAAe;gBACX,UAAU,OAAO,EAAE;gBACnB,MAAM;YACV;QACJ;QACA,SAAS;YACL,SAAS;gBACL,SAAS;oBAAE,OAAO;gBAAM;gBACxB,SAAS;oBACL,SAAS;wBACL,SAAS;4BAAE,OAAO;wBAAM;oBAC5B;gBACJ;YACJ;QACJ;IACJ;IAEA,IAAI,CAAC,QAAQ;QACT,IAAA,iMAAQ;IACZ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAM,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,0LAAI;gCAAC,MAAK;gCAAW,WAAU;0CAAgF;;;;;;0CAGhH,8OAAC;gCAAG,WAAU;0CAAmC,OAAO,KAAK;;;;;;;;;;;;kCAGjE,8OAAC;wBAAI,WAAU;;4BACV,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,yBACzB,8OAAC;;sDACG,8OAAC;4CAAG,WAAU;;gDAAoE;gDACtE,WAAW;gDAAE;gDAAG,OAAO,KAAK;;;;;;;sDAExC,8OAAC;4CAAG,WAAU;sDACT,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,4BACzB,8OAAC;8DACG,cAAA,8OAAC,0LAAI;wDACD,MAAM,CAAC,SAAS,EAAE,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO,IAAI,EAAE;wDAC9C,WAAU;kEAEV,cAAA,8OAAC;4DAAI,WAAU;;8EACX,8OAAC;oEAAK,WAAU;;wEACX,WAAW;wEAAE;wEAAE,cAAc;;;;;;;8EAElC,8OAAC;8EAAM,OAAO,KAAK;;;;;;;;;;;;;;;;;mDATtB,OAAO,EAAE;;;;;;;;;;;mCANpB,OAAO,EAAE;;;;;4BAuBtB,OAAO,OAAO,CAAC,MAAM,KAAK,mBACvB,8OAAC;gCAAE,WAAU;0CAA+B;;;;;;;;;;;;;;;;;;0BAMxD,8OAAC;gBAAK,WAAU;0BACX;;;;;;;;;;;;AAIjB"}}]
}