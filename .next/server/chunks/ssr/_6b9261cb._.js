module.exports=[3519,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);a.i(70396);var e=a.i(73727);async function f(a,b){let f=b.get("title"),g=b.get("slug"),h=b.get("description"),i=parseFloat(b.get("price"))||0,j=b.get("image");if(!f||!g)return{error:"Title and Slug are required"};try{await c.prisma.course.create({data:{tenantId:a,title:f,slug:g,description:h,price:i,image:j,published:!1}})}catch(a){return console.error("Failed to create course:",a),{error:"Failed to create course. Slug might already exist."}}(0,d.revalidatePath)("/admin/courses"),(0,e.redirect)("/admin/courses")}async function g(a,b,f){if(!b)return;let g=f.get("title"),h=f.get("slug"),i=f.get("description"),j=parseFloat(f.get("price"))||0,k=f.get("image"),l="on"===f.get("published");try{let d=await c.prisma.course.findUnique({where:{id:b}});if(!d||d.tenantId!==a)return{error:"Access denied"};await c.prisma.course.update({where:{id:b},data:{title:g,slug:h,description:i,price:j,image:k,published:l}})}catch(a){return console.error("Failed to update course:",a),{error:"Failed to update course."}}(0,d.revalidatePath)("/admin/courses"),(0,d.revalidatePath)(`/admin/courses/${b}`),(0,e.redirect)(`/admin/courses/${b}`)}async function h(a,b){if(b){try{let d=await c.prisma.course.findUnique({where:{id:b}});if(!d||d.tenantId!==a)return{error:"Access denied"};await c.prisma.course.delete({where:{id:b}})}catch(a){return console.error("Failed to delete course:",a),{error:"Failed to delete course."}}(0,d.revalidatePath)("/admin/courses"),(0,e.redirect)("/admin/courses")}}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"604a78745d54d1b207f8b030ab0b2fc6ed99b280b8",null),(0,b.registerServerReference)(g,"70a5678532715eb2e91f2b683a298da3fa6c4e9e80",null),(0,b.registerServerReference)(h,"60fec3e3c3a44a5cf64a9bc7d297c0152bb03b3a9d",null),a.s(["createCourse",()=>f,"deleteCourse",()=>h,"updateCourse",()=>g])},35624,a=>{"use strict";var b=a.i(7997),c=a.i(37936),d=a.i(44721),e=a.i(54056),f=a.i(3519),g=a.i(66518);a.i(70396);var h=a.i(73727);let i=async function(a,b){var[c]=await (0,d.decryptActionBoundArgs)("60b46c871dd1ce4f9f48a8438760dd3c46c692864a",a);await c(b)};async function j({params:a}){let{slug:c}=await a,j=await g.prisma.tenant.findUnique({where:{slug:c}});j||(0,h.notFound)();let k=f.createCourse.bind(null,j.id);return(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Nuevo Curso"}),(0,b.jsxs)("form",{action:i.bind(null,(0,d.encryptActionBoundArgs)("60b46c871dd1ce4f9f48a8438760dd3c46c692864a",k)),className:"space-y-6 bg-white dark:bg-zinc-950 p-6 rounded-lg shadow border border-gray-200 dark:border-zinc-800",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Título del Curso"}),(0,b.jsx)("input",{type:"text",name:"title",id:"title",required:!0,placeholder:"Curso de TypeScript Avanzado",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slug (URL)"}),(0,b.jsx)("input",{type:"text",name:"slug",id:"slug",required:!0,placeholder:"curso-typescript-avanzado",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Descripción Corta"}),(0,b.jsx)("textarea",{name:"description",id:"description",rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Precio (USD)"}),(0,b.jsx)("input",{type:"number",name:"price",id:"price",min:"0",step:"0.01",defaultValue:"0",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Imagen URL (Cover)"}),(0,b.jsx)("input",{type:"text",name:"image",id:"image",placeholder:"https://...",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border"})]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(e.Button,{type:"submit",children:"Crear Curso"})})]})]})}(0,c.registerServerReference)(i,"60b46c871dd1ce4f9f48a8438760dd3c46c692864a",null),a.s(["$$RSC_SERVER_ACTION_0",0,i,"default",()=>j])},67512,a=>{"use strict";var b=a.i(57469),c=a.i(35624),d=a.i(3519);a.s([],87388),a.i(87388),a.s(["004eab34b3722ccdb34bdc153ae48c8c96bfc525ab",()=>b.$$RSC_SERVER_ACTION_0,"604a78745d54d1b207f8b030ab0b2fc6ed99b280b8",()=>d.createCourse,"60b46c871dd1ce4f9f48a8438760dd3c46c692864a",()=>c.$$RSC_SERVER_ACTION_0,"60fec3e3c3a44a5cf64a9bc7d297c0152bb03b3a9d",()=>d.deleteCourse,"70a5678532715eb2e91f2b683a298da3fa6c4e9e80",()=>d.updateCourse],67512)}];

//# sourceMappingURL=_6b9261cb._.js.map