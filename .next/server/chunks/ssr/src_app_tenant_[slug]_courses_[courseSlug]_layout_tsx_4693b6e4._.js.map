{"version":3,"sources":["../../../../src/app/tenant/%5Bslug%5D/courses/%5BcourseSlug%5D/layout.tsx"],"sourcesContent":["import { prisma } from '@/lib/prisma';\r\nimport Link from 'next/link';\r\nimport { notFound } from 'next/navigation';\r\n\r\nexport default async function CourseLayout({\r\n    children,\r\n    params\r\n}: {\r\n    children: React.ReactNode;\r\n    params: Promise<{ slug: string, courseSlug: string }>;\r\n}) {\r\n    const resolvedParams = await params;\r\n    const { slug, courseSlug } = resolvedParams;\r\n\r\n    // 1. Get Tenant\r\n    const tenant = await prisma.tenant.findUnique({ where: { slug } });\r\n    if (!tenant) notFound();\r\n\r\n    // 2. Get Course scoped to Tenant\r\n    const course = await prisma.course.findUnique({\r\n        where: {\r\n            tenantId_slug: {\r\n                tenantId: tenant.id,\r\n                slug: courseSlug\r\n            }\r\n        },\r\n        include: {\r\n            modules: {\r\n                orderBy: { order: 'asc' },\r\n                include: {\r\n                    lessons: {\r\n                        orderBy: { order: 'asc' }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    if (!course) {\r\n        notFound();\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex flex-col pt-16 md:pt-0 md:flex-row\">\r\n            {/* Sidebar / Curriculum */}\r\n            <aside className=\"w-full md:w-80 bg-gray-50 dark:bg-zinc-900 border-r border-gray-200 dark:border-zinc-800 flex-shrink-0 md:h-screen md:sticky md:top-0 overflow-y-auto\">\r\n                <div className=\"p-4 border-b border-gray-200 dark:border-zinc-800\">\r\n                    <Link href=\"/courses\" className=\"text-xs text-gray-500 hover:text-gray-900 dark:hover:text-gray-300 mb-2 block\">\r\n                        &larr; Volver al catálogo\r\n                    </Link>\r\n                    <h2 className=\"font-bold text-lg leading-tight\">{course.title}</h2>\r\n                </div>\r\n\r\n                <div className=\"p-4 space-y-6\">\r\n                    {course.modules.map((module, modIndex) => (\r\n                        <div key={module.id}>\r\n                            <h3 className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\">\r\n                                Módulo {modIndex + 1}: {module.title}\r\n                            </h3>\r\n                            <ul className=\"space-y-1\">\r\n                                {module.lessons.map((lesson, lessonIndex) => (\r\n                                    <li key={lesson.id}>\r\n                                        <Link\r\n                                            href={`/courses/${course.slug}/${lesson.slug}`}\r\n                                            className=\"block px-3 py-2 rounded-md text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors\"\r\n                                        >\r\n                                            <div className=\"flex items-start gap-2\">\r\n                                                <span className=\"mt-0.5 text-gray-400 dark:text-gray-500 text-xs text-nowrap\">\r\n                                                    {modIndex + 1}.{lessonIndex + 1}\r\n                                                </span>\r\n                                                <span>{lesson.title}</span>\r\n                                            </div>\r\n                                        </Link>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n                    ))}\r\n                    {course.modules.length === 0 && (\r\n                        <p className=\"text-sm text-gray-500 italic\">Próximamente...</p>\r\n                    )}\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 min-w-0\">\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"uDAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,EAAa,UACvC,CAAQ,QACR,CAAM,CAIT,EAEG,GAAM,CAAE,MAAI,YAAE,CAAU,CAAE,CADH,EACM,IADA,EAIvB,EAAS,MAAM,EAAA,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAE,MAAO,MAAE,CAAK,CAAE,EAC5D,CAAC,GAAQ,CAAA,EAAA,EAAA,QAAA,AAAQ,IAGrB,IAAM,EAAS,MAAM,EAAA,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAC1C,MAAO,CACH,cAAe,CACX,SAAU,EAAO,EAAE,CACnB,KAAM,CACV,CACJ,EACA,QAAS,CACL,QAAS,CACL,QAAS,CAAE,MAAO,KAAM,EACxB,QAAS,CACL,QAAS,CACL,QAAS,CAAE,MAAO,KAAM,CAC5B,CACJ,CACJ,CACJ,CACJ,GAMA,OAJI,AAAC,GACD,CAAA,EAAA,EADS,AACT,QAAQ,AAAR,IAIA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEAEX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,kKACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,WAAW,UAAU,yFAAgF,yBAGhH,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2CAAmC,EAAO,KAAK,MAGjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACV,EAAO,OAAO,CAAC,GAAG,CAAC,CAAC,EAAQ,IACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,8EAAoE,UACtE,EAAW,EAAE,KAAG,EAAO,KAAK,IAExC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACT,EAAO,OAAO,CAAC,GAAG,CAAC,CAAC,EAAQ,IACzB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACD,KAAM,CAAC,SAAS,EAAE,EAAO,IAAI,CAAC,CAAC,EAAE,EAAO,IAAI,CAAA,CAAE,CAC9C,UAAU,0IAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACX,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,wEACX,EAAW,EAAE,IAAE,EAAc,KAElC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAO,KAAK,SATtB,EAAO,EAAE,OANpB,EAAO,EAAE,GAuBI,IAA1B,EAAO,OAAO,CAAC,MAAM,EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,0BAMxD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BACX,MAIjB"}