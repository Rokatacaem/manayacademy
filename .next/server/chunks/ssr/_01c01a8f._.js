module.exports=[99530,28903,a=>{"use strict";var b=a.i(7997),c=a.i(37936),d=a.i(44721),e=a.i(66518),f=a.i(54056),g=a.i(18558);async function h(a,b){let c=b.get("name");if(!c||""===c.trim())return{error:"Tag name is required"};try{await e.prisma.tag.create({data:{name:c.trim(),tenantId:a}})}catch(a){return console.error("Failed to create tag:",a),{error:"Failed to create tag. Name might already exist."}}(0,g.revalidatePath)("/admin/tags"),(0,g.revalidatePath)("/admin/contacts")}async function i(a,b){if(b){try{let c=await e.prisma.tag.findUnique({where:{id:b}});if(!c||c.tenantId!==a)return{error:"Access denied"};await e.prisma.tag.delete({where:{id:b}})}catch(a){return console.error("Failed to delete tag:",a),{error:"Failed to delete tag."}}(0,g.revalidatePath)("/admin/tags"),(0,g.revalidatePath)("/admin/contacts")}}(0,a.i(13095).ensureServerEntryExports)([h,i]),(0,c.registerServerReference)(h,"60e60e0f124ce56c75378f2900f9897e13beb96286",null),(0,c.registerServerReference)(i,"601c7d9cab7300c2118446a4ae12bab3c76ad29a8d",null),a.s(["createTag",()=>h,"deleteTag",()=>i],28903),a.i(70396);var j=a.i(73727);let k=async function(a,b){var[c]=await (0,d.decryptActionBoundArgs)("609a259bb3823e280e70195de626895b2771ec418c",a);await c(b)};(0,c.registerServerReference)(k,"609a259bb3823e280e70195de626895b2771ec418c",null);let l=async function(a){var[b,c]=await (0,d.decryptActionBoundArgs)("40c35a10bfe5a01a4039b5821e35ece3d90b234ad4",a);await b(c)};async function m({params:a}){let{slug:c}=await a,g=await e.prisma.tenant.findUnique({where:{slug:c}});g||(0,j.notFound)();let m=await e.prisma.tag.findMany({where:{tenantId:g.id},orderBy:{name:"asc"},include:{_count:{select:{contacts:!0}}}}),n=h.bind(null,g.id),o=i.bind(null,g.id);return(0,b.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"GestiÃ³n de Etiquetas"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"md:col-span-1",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-zinc-950 p-6 rounded-lg shadow border border-gray-200 dark:border-zinc-800 sticky top-6",children:[(0,b.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Nueva Etiqueta"}),(0,b.jsxs)("form",{action:k.bind(null,(0,d.encryptActionBoundArgs)("609a259bb3823e280e70195de626895b2771ec418c",n)),className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre"}),(0,b.jsx)("input",{type:"text",name:"name",id:"name",required:!0,placeholder:"Ej. Cliente VIP",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border"})]}),(0,b.jsx)(f.Button,{type:"submit",className:"w-full",children:"Crear Etiqueta"})]})]})}),(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsx)("div",{className:"bg-white dark:bg-zinc-950 shadow sm:rounded-lg overflow-hidden border border-gray-200 dark:border-zinc-800",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-zinc-800",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-zinc-900",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Nombre"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contactos"}),(0,b.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,b.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),(0,b.jsxs)("tbody",{className:"bg-white dark:bg-zinc-950 divide-y divide-gray-200 dark:divide-zinc-800",children:[m.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:a._count.contacts}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,b.jsx)("form",{action:l.bind(null,(0,d.encryptActionBoundArgs)("40c35a10bfe5a01a4039b5821e35ece3d90b234ad4",o,a.id)),children:(0,b.jsx)("button",{type:"submit",className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Eliminar"})})})]},a.id)),0===m.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No hay etiquetas registradas."})})]})]})})})]})]})}(0,c.registerServerReference)(l,"40c35a10bfe5a01a4039b5821e35ece3d90b234ad4",null),a.s(["$$RSC_SERVER_ACTION_0",0,k,"$$RSC_SERVER_ACTION_1",0,l,"default",()=>m],99530)},90004,a=>{"use strict";var b=a.i(57469),c=a.i(99530),d=a.i(28903);a.s([],60942),a.i(60942),a.s(["004eab34b3722ccdb34bdc153ae48c8c96bfc525ab",()=>b.$$RSC_SERVER_ACTION_0,"40c35a10bfe5a01a4039b5821e35ece3d90b234ad4",()=>c.$$RSC_SERVER_ACTION_1,"601c7d9cab7300c2118446a4ae12bab3c76ad29a8d",()=>d.deleteTag,"609a259bb3823e280e70195de626895b2771ec418c",()=>c.$$RSC_SERVER_ACTION_0,"60e60e0f124ce56c75378f2900f9897e13beb96286",()=>d.createTag],90004)}];

//# sourceMappingURL=_01c01a8f._.js.map