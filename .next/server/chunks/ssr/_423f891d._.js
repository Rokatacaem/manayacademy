module.exports=[38961,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);a.i(70396);var e=a.i(73727);async function f(a,b,f){let g=f.get("title");if(!g)return{error:"Title required"};try{let d=await c.prisma.course.findUnique({where:{id:b}});if(!d||d.tenantId!==a)return{error:"Access denied"};let e=await c.prisma.module.findFirst({where:{courseId:b},orderBy:{order:"desc"}}),f=(e?.order??-1)+1;await c.prisma.module.create({data:{tenantId:a,courseId:b,title:g,order:f}})}catch(a){return console.error("Failed to create module:",a),{error:"Failed to create module"}}(0,d.revalidatePath)(`/admin/courses/${b}`),(0,e.redirect)(`/admin/courses/${b}`)}async function g(a,b,f,g){let h=g.get("title");try{let b=await c.prisma.module.findUnique({where:{id:f}});if(!b||b.tenantId!==a)return{error:"Access denied"};await c.prisma.module.update({where:{id:f},data:{title:h}})}catch(a){return{error:"Update failed"}}(0,d.revalidatePath)(`/admin/courses/${b}`),(0,e.redirect)(`/admin/courses/${b}`)}async function h(a,b,e){try{let b=await c.prisma.module.findUnique({where:{id:e}});if(!b||b.tenantId!==a)return{error:"Access denied"};await c.prisma.module.delete({where:{id:e}})}catch(a){return{error:"Delete failed"}}(0,d.revalidatePath)(`/admin/courses/${b}`)}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"70281f4906bb0911fb3dd4878f5e2014da328c1492",null),(0,b.registerServerReference)(g,"78e67356fe45f6f15a2214517bde5d1662c995ff8b",null),(0,b.registerServerReference)(h,"7046ca9ed0d19d0cf0e10494ccb94f149e5345f0a6",null),a.s(["createModule",()=>f,"deleteModule",()=>h,"updateModule",()=>g])},24518,a=>{"use strict";var b=a.i(7997),c=a.i(37936),d=a.i(44721),e=a.i(66518),f=a.i(54056),g=a.i(38961);a.i(70396);var h=a.i(73727);let i=async function(a,b){var[c]=await (0,d.decryptActionBoundArgs)("600114919ff16249e16f8dcc4c7b7843ccd429e142",a);await c(b)};(0,c.registerServerReference)(i,"600114919ff16249e16f8dcc4c7b7843ccd429e142",null);let j=async function(a){var[b]=await (0,d.decryptActionBoundArgs)("400a4cb32327c3bb68ec64820695244f0656730f2d",a);await b()};async function k({params:a}){let{slug:c,courseId:k,moduleId:l}=await a,m=await e.prisma.tenant.findUnique({where:{slug:c}});m||(0,h.notFound)();let n=await e.prisma.module.findUnique({where:{id:l},include:{course:!0}});n&&n.tenantId===m.id&&n.courseId===k||(0,h.notFound)();let o=g.updateModule.bind(null,m.id,k,l),p=g.deleteModule.bind(null,m.id,k,l);return(0,b.jsxs)("div",{className:"max-w-xl mx-auto space-y-8",children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold",children:["Editar Módulo: ",n.title]}),(0,b.jsxs)("form",{action:i.bind(null,(0,d.encryptActionBoundArgs)("600114919ff16249e16f8dcc4c7b7843ccd429e142",o)),className:"space-y-6 bg-white dark:bg-zinc-950 p-6 rounded-lg shadow border border-gray-200 dark:border-zinc-800",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Título del Módulo"}),(0,b.jsx)("input",{type:"text",name:"title",id:"title",defaultValue:n.title,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border"})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(f.Button,{type:"submit",children:"Guardar Cambios"})})]}),(0,b.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 p-6 rounded-lg border border-red-200 dark:border-red-900",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-red-800 dark:text-red-300 mb-2",children:"Zona de Peligro"}),(0,b.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mb-4",children:"Eliminar este módulo borrará todas sus lecciones asociadas."}),(0,b.jsx)("form",{action:j.bind(null,(0,d.encryptActionBoundArgs)("400a4cb32327c3bb68ec64820695244f0656730f2d",p)),children:(0,b.jsx)(f.Button,{type:"submit",variant:"destructive",className:"w-full",children:"Eliminar Módulo"})})]})]})}(0,c.registerServerReference)(j,"400a4cb32327c3bb68ec64820695244f0656730f2d",null),a.s(["$$RSC_SERVER_ACTION_0",0,i,"$$RSC_SERVER_ACTION_1",0,j,"default",()=>k])},91618,a=>{"use strict";var b=a.i(57469),c=a.i(24518),d=a.i(38961);a.s([],79561),a.i(79561),a.s(["004eab34b3722ccdb34bdc153ae48c8c96bfc525ab",()=>b.$$RSC_SERVER_ACTION_0,"400a4cb32327c3bb68ec64820695244f0656730f2d",()=>c.$$RSC_SERVER_ACTION_1,"600114919ff16249e16f8dcc4c7b7843ccd429e142",()=>c.$$RSC_SERVER_ACTION_0,"70281f4906bb0911fb3dd4878f5e2014da328c1492",()=>d.createModule,"7046ca9ed0d19d0cf0e10494ccb94f149e5345f0a6",()=>d.deleteModule,"78e67356fe45f6f15a2214517bde5d1662c995ff8b",()=>d.updateModule],91618)}];

//# sourceMappingURL=_423f891d._.js.map