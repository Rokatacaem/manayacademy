module.exports=[3519,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);a.i(70396);var e=a.i(73727);async function f(a,b){let f=b.get("title"),g=b.get("slug"),h=b.get("description"),i=parseFloat(b.get("price"))||0,j=b.get("image");if(!f||!g)return{error:"Title and Slug are required"};try{await c.prisma.course.create({data:{tenantId:a,title:f,slug:g,description:h,price:i,image:j,published:!1}})}catch(a){return console.error("Failed to create course:",a),{error:"Failed to create course. Slug might already exist."}}(0,d.revalidatePath)("/admin/courses"),(0,e.redirect)("/admin/courses")}async function g(a,b,f){if(!b)return;let g=f.get("title"),h=f.get("slug"),i=f.get("description"),j=parseFloat(f.get("price"))||0,k=f.get("image"),l="on"===f.get("published");try{let d=await c.prisma.course.findUnique({where:{id:b}});if(!d||d.tenantId!==a)return{error:"Access denied"};await c.prisma.course.update({where:{id:b},data:{title:g,slug:h,description:i,price:j,image:k,published:l}})}catch(a){return console.error("Failed to update course:",a),{error:"Failed to update course."}}(0,d.revalidatePath)("/admin/courses"),(0,d.revalidatePath)(`/admin/courses/${b}`),(0,e.redirect)(`/admin/courses/${b}`)}async function h(a,b){if(b){try{let d=await c.prisma.course.findUnique({where:{id:b}});if(!d||d.tenantId!==a)return{error:"Access denied"};await c.prisma.course.delete({where:{id:b}})}catch(a){return console.error("Failed to delete course:",a),{error:"Failed to delete course."}}(0,d.revalidatePath)("/admin/courses"),(0,e.redirect)("/admin/courses")}}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"604a78745d54d1b207f8b030ab0b2fc6ed99b280b8",null),(0,b.registerServerReference)(g,"70a5678532715eb2e91f2b683a298da3fa6c4e9e80",null),(0,b.registerServerReference)(h,"60fec3e3c3a44a5cf64a9bc7d297c0152bb03b3a9d",null),a.s(["createCourse",()=>f,"deleteCourse",()=>h,"updateCourse",()=>g])},72469,a=>{"use strict";var b=a.i(7997),c=a.i(37936),d=a.i(44721),e=a.i(66518),f=a.i(54056),g=a.i(3519);a.i(70396);var h=a.i(73727),i=a.i(95936);let j=async function(a,b){var[c,e]=await (0,d.decryptActionBoundArgs)("60b9389584363ecb14d154cc60793d746598fa522e",a);await (0,g.updateCourse)(c,e,b)};(0,c.registerServerReference)(j,"60b9389584363ecb14d154cc60793d746598fa522e",null);let k=async function(a){var[b,c]=await (0,d.decryptActionBoundArgs)("4092e997522305671bdacf6ca7a4672fc326034831",a);await (0,g.deleteCourse)(b,c)};async function l({params:a}){let{courseId:c}=await a,g=await e.prisma.course.findUnique({where:{id:c},include:{modules:{orderBy:{order:"asc"},include:{lessons:{orderBy:{order:"asc"}}}}}});return g||(0,h.notFound)(),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:g.title}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["/",g.slug]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(i.default,{href:`/courses/${g.slug}`,target:"_blank",children:(0,b.jsx)(f.Button,{variant:"outline",children:"Ver c贸mo estudiante"})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"md:col-span-1 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-zinc-950 p-6 rounded-lg shadow border border-gray-200 dark:border-zinc-800",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Detalles del Curso"}),(0,b.jsxs)("form",{action:j.bind(null,(0,d.encryptActionBoundArgs)("60b9389584363ecb14d154cc60793d746598fa522e",g.tenantId,g.id)),className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"T铆tulo"}),(0,b.jsx)("input",{type:"text",name:"title",defaultValue:g.title,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slug"}),(0,b.jsx)("input",{type:"text",name:"slug",defaultValue:g.slug,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Descripci贸n"}),(0,b.jsx)("textarea",{name:"description",rows:3,defaultValue:g.description||"",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Precio"}),(0,b.jsx)("input",{type:"number",name:"price",step:"0.01",defaultValue:Number(g.price),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Imagen URL"}),(0,b.jsx)("input",{type:"text",name:"image",defaultValue:g.image||"",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm p-2 bg-transparent border"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",name:"published",id:"published",defaultChecked:g.published,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,b.jsx)("label",{htmlFor:"published",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Publicado"})]}),(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)(f.Button,{type:"submit",className:"w-full",children:"Guardar Cambios"})})]})]}),(0,b.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 p-6 rounded-lg border border-red-200 dark:border-red-900",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-red-800 dark:text-red-300 mb-2",children:"Zona de Peligro"}),(0,b.jsx)("form",{action:k.bind(null,(0,d.encryptActionBoundArgs)("4092e997522305671bdacf6ca7a4672fc326034831",g.tenantId,g.id)),children:(0,b.jsx)(f.Button,{type:"submit",variant:"destructive",className:"w-full",children:"Eliminar Curso"})})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Contenido del Curso"}),(0,b.jsx)(i.default,{href:`/admin/courses/${g.id}/modules/new`,children:(0,b.jsx)(f.Button,{variant:"secondary",children:"+ A帽adir M贸dulo"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[0===g.modules.length&&(0,b.jsx)("div",{className:"text-center py-12 bg-gray-50 dark:bg-zinc-900/50 rounded-lg border border-dashed border-gray-300 dark:border-zinc-700",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No hay m贸dulos definidos."})}),g.modules.map(a=>(0,b.jsxs)("div",{className:"bg-white dark:bg-zinc-950 rounded-lg shadow border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gray-50 dark:bg-zinc-900 px-4 py-3 flex justify-between items-center border-b border-gray-200 dark:border-zinc-800",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.title}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(i.default,{href:`/admin/courses/${g.id}/modules/${a.id}/edit`,children:(0,b.jsx)("span",{className:"text-xs text-indigo-600 hover:underline",children:"Editar"})})})]}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("ul",{className:"space-y-2",children:a.lessons.map(c=>(0,b.jsxs)("li",{className:"flex justify-between items-center p-2 hover:bg-gray-50 dark:hover:bg-zinc-900 rounded",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:""}),(0,b.jsx)("span",{className:"text-sm",children:c.title})]}),(0,b.jsx)(i.default,{href:`/admin/courses/${g.id}/modules/${a.id}/lessons/${c.id}`,children:(0,b.jsx)("span",{className:"text-xs text-indigo-600 hover:underline",children:"Editar"})})]},c.id))}),(0,b.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-zinc-800",children:(0,b.jsx)(i.default,{href:`/admin/courses/${g.id}/modules/${a.id}/lessons/new`,className:"text-sm text-gray-500 hover:text-indigo-600 flex items-center gap-1",children:(0,b.jsx)("span",{children:"+ A帽adir Lecci贸n"})})})]})]},a.id))]})]})]})]})}(0,c.registerServerReference)(k,"4092e997522305671bdacf6ca7a4672fc326034831",null),a.s(["$$RSC_SERVER_ACTION_0",0,j,"$$RSC_SERVER_ACTION_1",0,k,"default",()=>l])},13527,a=>{"use strict";var b=a.i(57469),c=a.i(72469),d=a.i(3519);a.s([],4704),a.i(4704),a.s(["004eab34b3722ccdb34bdc153ae48c8c96bfc525ab",()=>b.$$RSC_SERVER_ACTION_0,"4092e997522305671bdacf6ca7a4672fc326034831",()=>c.$$RSC_SERVER_ACTION_1,"604a78745d54d1b207f8b030ab0b2fc6ed99b280b8",()=>d.createCourse,"60b9389584363ecb14d154cc60793d746598fa522e",()=>c.$$RSC_SERVER_ACTION_0,"60fec3e3c3a44a5cf64a9bc7d297c0152bb03b3a9d",()=>d.deleteCourse,"70a5678532715eb2e91f2b683a298da3fa6c4e9e80",()=>d.updateCourse],13527)}];

//# sourceMappingURL=_03629857._.js.map