module.exports=[13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},70722,(a,b,c)=>{b.exports=a.x("tty",()=>require("tty"))},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},33405,(a,b,c)=>{b.exports=a.x("child_process",()=>require("child_process"))},24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},10430,(a,b,c)=>{b.exports=a.x("async_hooks",()=>require("async_hooks"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},90827,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);a.i(70396);var e=a.i(73727);async function f(a,b){let f=b.get("email"),g=b.get("firstName"),h=b.get("lastName"),i=b.get("tags");if(!f)throw Error("Email is required");let j=i.split(",").map(a=>a.trim()).filter(Boolean);try{await c.prisma.contact.create({data:{tenantId:a,email:f,firstName:g,lastName:h,source:"Manual Entry",tags:{connectOrCreate:j.map(b=>({where:{tenantId_name:{name:b,tenantId:a}},create:{name:b,tenantId:a}}))}}})}catch(a){return console.error("Failed to create contact:",a),{error:"Failed to create contact. Email might already exist."}}(0,d.revalidatePath)("/admin/contacts"),(0,e.redirect)("/admin/contacts")}async function g(a,b,f){if(!b)return{error:"ID required"};let g=f.get("email"),h=f.get("firstName"),i=f.get("lastName"),j=f.get("tags"),k=f.get("status");if(!g)return{error:"Email is required"};let l=j.split(",").map(a=>a.trim()).filter(Boolean);try{let d=await c.prisma.contact.findUnique({where:{id:b}});if(!d||d.tenantId!==a)return{error:"Contact not found or access denied relative to tenant."};await c.prisma.contact.update({where:{id:b},data:{email:g,firstName:h,lastName:i,status:k,tags:{set:[],connectOrCreate:l.map(b=>({where:{tenantId_name:{name:b,tenantId:a}},create:{name:b,tenantId:a}}))}}})}catch(a){return console.error("Failed to update contact:",a),{error:"Failed to update contact."}}(0,d.revalidatePath)("/admin/contacts"),(0,d.revalidatePath)(`/admin/contacts/${b}`),(0,e.redirect)("/admin/contacts")}async function h(a,b){if(b){try{let d=await c.prisma.contact.findUnique({where:{id:b}});if(!d||d.tenantId!==a)return{error:"Access denied."};await c.prisma.contact.delete({where:{id:b}})}catch(a){return console.error("Failed to delete contact:",a),{error:"Failed to delete contact."}}(0,d.revalidatePath)("/admin/contacts"),(0,e.redirect)("/admin/contacts")}}async function i(a){let b=a.get("email"),d=a.get("firstName"),e=await c.prisma.tenant.findFirst();if(!e)return{error:"System not initialized. No tenant found."};if(!b)return{error:"Email is required"};try{return await c.prisma.contact.upsert({where:{tenantId_email:{email:b,tenantId:e.id}},update:{firstName:d},create:{tenantId:e.id,email:b,firstName:d,source:"Web/Landing"}}),{success:!0}}catch(a){return console.error("Failed to register lead:",a),{error:"Registration failed. Please try again."}}}(0,a.i(13095).ensureServerEntryExports)([f,g,h,i]),(0,b.registerServerReference)(f,"60a03e9cbcbc839e4ba63b7e761b7de8d556fdea2b",null),(0,b.registerServerReference)(g,"702ce05d86f183999eaa385b5b06b01655c070e46d",null),(0,b.registerServerReference)(h,"602dfe272af42807756d0c19eda457a545b8c630f9",null),(0,b.registerServerReference)(i,"402aa9aa5b1ca2439b0f58e3fd9240074f2f7baae7",null),a.s(["createContact",()=>f,"deleteContact",()=>h,"registerPublicLead",()=>i,"updateContact",()=>g])},91576,a=>{"use strict";var b=a.i(90827);a.s([],86148),a.i(86148),a.s(["402aa9aa5b1ca2439b0f58e3fd9240074f2f7baae7",()=>b.registerPublicLead],91576)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c01bf962._.js.map