module.exports=[13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},20122,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);a.i(70396);var e=a.i(73727);async function f(a,b,f,g){let h=g.get("title"),i=g.get("slug"),j=g.get("videoUrl"),k=g.get("content");if(!h||!i)return{error:"Title and Slug required"};try{let b=await c.prisma.module.findUnique({where:{id:f}});if(!b||b.tenantId!==a)return{error:"Access denied"};let d=await c.prisma.lesson.findFirst({where:{moduleId:f},orderBy:{order:"desc"}}),e=(d?.order??-1)+1;await c.prisma.lesson.create({data:{tenantId:a,moduleId:f,title:h,slug:i,videoUrl:j,content:k,order:e}})}catch(a){return console.error("Create Lesson Error:",a),{error:"Failed to create lesson"}}(0,d.revalidatePath)(`/admin/courses/${b}`),(0,e.redirect)(`/admin/courses/${b}`)}async function g(a,b,f,g,h){let i=h.get("title"),j=h.get("slug"),k=h.get("videoUrl"),l=h.get("content");try{let b=await c.prisma.lesson.findUnique({where:{id:g}});if(!b||b.tenantId!==a)return{error:"Access denied"};await c.prisma.lesson.update({where:{id:g},data:{title:i,slug:j,videoUrl:k,content:l}})}catch(a){return{error:"Update failed"}}(0,d.revalidatePath)(`/admin/courses/${b}`),(0,d.revalidatePath)(`/admin/courses/${b}/modules/${f}/lessons/${g}`),(0,e.redirect)(`/admin/courses/${b}`)}async function h(a,b,e){try{let b=await c.prisma.lesson.findUnique({where:{id:e}});if(!b||b.tenantId!==a)return{error:"Access denied"};await c.prisma.lesson.delete({where:{id:e}})}catch(a){return{error:"Delete failed"}}(0,d.revalidatePath)(`/admin/courses/${b}`)}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"78fbd6c6427b76f39c03d6f5b06f73afc53afa017d",null),(0,b.registerServerReference)(g,"7c9e36c959a1e5098b6f32a5cbd0778c0f00e3555a",null),(0,b.registerServerReference)(h,"70bab27e667a2a26e8f7c191d43e563faf5bd79c44",null),a.s(["createLesson",()=>f,"deleteLesson",()=>h,"updateLesson",()=>g])},66940,a=>{"use strict";var b=a.i(57469),c=a.i(20122);a.s([],25551),a.i(25551),a.s(["004eab34b3722ccdb34bdc153ae48c8c96bfc525ab",()=>b.$$RSC_SERVER_ACTION_0,"70bab27e667a2a26e8f7c191d43e563faf5bd79c44",()=>c.deleteLesson,"78fbd6c6427b76f39c03d6f5b06f73afc53afa017d",()=>c.createLesson,"7c9e36c959a1e5098b6f32a5cbd0778c0f00e3555a",()=>c.updateLesson],66940)}];

//# sourceMappingURL=_470733a6._.js.map