{"version":3,"sources":["../../../../src/components/ui/Button.tsx","../../../../node_modules/clsx/dist/clsx.mjs","../../../../src/app/tenant/%5Bslug%5D/admin/contacts/%5Bid%5D/page.tsx"],"sourcesContent":["\r\nimport { ButtonHTMLAttributes, forwardRef } from 'react'\r\nimport { clsx } from 'clsx'\r\n\r\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'destructive'\r\n    size?: 'sm' | 'md' | 'lg'\r\n}\r\n\r\nconst Button = forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant = 'primary', ...props }, ref) => {\r\n        return (\r\n            <button\r\n                ref={ref}\r\n                className={clsx(\r\n                    'btn',\r\n                    {\r\n                        'btn-primary': variant === 'primary',\r\n                        'btn-destructive': variant === 'destructive',\r\n                        // Add other variants as needed based on globals.css\r\n                    },\r\n                    className\r\n                )}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nButton.displayName = 'Button'\r\n\r\nexport { Button }\r\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","\r\nimport { prisma } from '@/lib/prisma';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { updateContact, deleteContact } from '@/actions/contacts';\r\nimport { notFound } from 'next/navigation';\r\n\r\nexport default async function EditContactPage({ params }: { params: Promise<{ slug: string, id: string }> }) {\r\n    const { slug, id } = await params;\r\n\r\n    // Fetch tenant to verify ownership and getting ready for binding\r\n    const tenant = await prisma.tenant.findUnique({ where: { slug } });\r\n    if (!tenant) notFound();\r\n\r\n    const contact = await prisma.contact.findUnique({\r\n        where: { id },\r\n        include: { tags: true }\r\n    });\r\n\r\n    // Security check: Ensure contact belongs to the current tenant\r\n    if (!contact || contact.tenantId !== tenant.id) {\r\n        notFound();\r\n    }\r\n\r\n    const tagsString = contact.tags.map(t => t.name).join(', ');\r\n\r\n    // Bind tenantId to actions\r\n    const updateContactWithTenant = updateContact.bind(null, tenant.id, contact.id);\r\n    const deleteContactWithTenant = deleteContact.bind(null, tenant.id, contact.id);\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h1 className=\"text-2xl font-bold\">Editar Contacto</h1>\r\n            </div>\r\n\r\n            <form action={updateContactWithTenant} className=\"space-y-6 bg-white dark:bg-zinc-950 p-6 rounded-lg shadow border border-gray-200 dark:border-zinc-800\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                        <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                            Nombre\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"firstName\"\r\n                            id=\"firstName\"\r\n                            defaultValue={contact.firstName || ''}\r\n                            className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                            Apellido\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"lastName\"\r\n                            id=\"lastName\"\r\n                            defaultValue={contact.lastName || ''}\r\n                            className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                        Email <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        id=\"email\"\r\n                        required\r\n                        defaultValue={contact.email}\r\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border\"\r\n                    />\r\n                </div>\r\n\r\n                <div>\r\n                    <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                        Estado\r\n                    </label>\r\n                    <select\r\n                        name=\"status\"\r\n                        id=\"status\"\r\n                        defaultValue={contact.status}\r\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border\"\r\n                    >\r\n                        <option value=\"ACTIVE\">Activo</option>\r\n                        <option value=\"UNSUBSCRIBED\">Desuscrito</option>\r\n                        <option value=\"BOUNCED\">Rebotado</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div>\r\n                    <label htmlFor=\"tags\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                        Etiquetas (separadas por coma)\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"tags\"\r\n                        id=\"tags\"\r\n                        defaultValue={tagsString}\r\n                        placeholder=\"vip, nuevo, marzo2026\"\r\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-transparent border\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"pt-4 flex justify-end items-center\">\r\n                    <Button type=\"submit\">Actualizar Contacto</Button>\r\n                </div>\r\n            </form>\r\n\r\n            <div className=\"flex justify-end pt-4 border-t border-gray-200 dark:border-zinc-800\">\r\n                <form action={deleteContactWithTenant}>\r\n                    <Button type=\"submit\" variant=\"destructive\">\r\n                        Eliminar Contacto\r\n                    </Button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1]}